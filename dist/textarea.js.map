{"version":3,"file":"textarea.js","sources":["../src/Textarea/InputWrapper.tsx","../src/Textarea/InputTab.tsx","../src/FormattedText.tsx","../src/Textarea/PreviewTab.tsx","../src/Textarea/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nexport interface Props {\n  style?: { [propName: string]: string };\n  children: React.ReactNode;\n}\n\nconst wrapper = ({ children, style = {} }: Props) => (\n  <div\n    style={{\n      border: '1px solid #ddd',\n      borderTop: '0px',\n      borderRadius: '5px',\n      borderTopLeftRadius: '0px',\n      borderTopRightRadius: '0px',\n      padding: '10px',\n      backgroundColor: '#fff',\n      textAlign: 'left',\n      ...style,\n    }}\n  >\n    {children}\n  </div>\n);\n\nexport default wrapper;\n","import * as React from 'react';\nimport { Input } from 'reactstrap';\nimport InputWrapper from './InputWrapper';\n\nexport interface Props {\n  allowFilteredHtml: boolean;\n  value: string;\n  name?: string;\n  valid?: boolean;\n  invalid?: boolean;\n  rows?: number;\n  cols?: number;\n  bsSize?: 'lg' | 'sm';\n  disabled?: boolean;\n  autoFocus?: boolean;\n  maxLength?: number;\n  readOnly?: boolean;\n  required?: boolean;\n  wrap?: 'hard' | 'soft';\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n}\n\nexport default class InputTabMD extends React.PureComponent<Props> {\n  render() {\n    const { allowFilteredHtml, ...other } = this.props;\n\n    return (\n      <InputWrapper>\n        {allowFilteredHtml && (\n          <p>\n            You can input markdown or html (start with &lt; to indicate html)\n            for styling the text.\n          </p>\n        )}\n        <Input type=\"textarea\" {...other} />\n      </InputWrapper>\n    );\n  }\n}\n","import * as React from 'react';\nimport { default as ReactMarkdown } from 'react-markdown';\nimport { filterXSS as xss, getDefaultWhiteList } from 'xss';\n\nexport interface FilterInput {\n  value: string;\n  whiteList?: { [propName: string]: string[] };\n}\n\nexport interface Props extends FilterInput {\n  allowFilteredHtml?: boolean;\n}\n\nexport default class FormattedText extends React.PureComponent<Props> {\n  static filterXss({\n    value,\n    whiteList = {\n      source: ['src', 'type'],\n      img: ['src', 'alt', 'title', 'width', 'height', 'style'],\n      video: [\n        'autoplay',\n        'controls',\n        'loop',\n        'preload',\n        'src',\n        'height',\n        'width',\n        'style',\n      ],\n    },\n  }: FilterInput): string {\n    const options = {\n      whiteList: {\n        ...getDefaultWhiteList(),\n        ...whiteList,\n      },\n      stripIgnoreTagBody: ['script'], // the script tag is a special case, we need\n      // to filter out its content\n    };\n    return xss(value, options);\n  }\n\n  render() {\n    const { value, allowFilteredHtml = false, whiteList } = this.props;\n\n    if (typeof value !== 'string') return null;\n\n    if (allowFilteredHtml && value.indexOf('<') === 0) {\n      const filteredContent = FormattedText.filterXss({ value, whiteList });\n      return <div dangerouslySetInnerHTML={{ __html: filteredContent }} />;\n    }\n\n    return <ReactMarkdown source={value} escapeHtml={false} />;\n  }\n}\n","import * as React from 'react';\nimport InputWrapper from './InputWrapper';\nimport { default as FormattedText } from '../FormattedText';\n\nexport interface Props {\n  allowFilteredHtml: boolean;\n  value: string;\n  skipRender: boolean;\n}\n\nexport default class PreviewTabMD extends React.Component<Props> {\n  shouldComponentUpdate(newProps: Props) {\n    if (newProps.skipRender) return false;\n\n    const { value, allowFilteredHtml } = this.props;\n    if (\n      newProps.value !== value ||\n      newProps.allowFilteredHtml !== allowFilteredHtml\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    const { allowFilteredHtml, value } = this.props;\n\n    return (\n      <InputWrapper>\n        <FormattedText value={value} allowFilteredHtml={allowFilteredHtml} />\n      </InputWrapper>\n    );\n  }\n}\n","import * as React from 'react';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport InputTab, { Props as InputProps } from './InputTab';\nimport PreviewTab from './PreviewTab';\nimport { default as FormattedText } from '../FormattedText';\n\nexport interface State {\n  showEdit: boolean;\n}\n\nexport interface Props extends InputProps {\n  id: string;\n  value: string;\n  allowFilteredHtml: boolean;\n  toggle?: boolean;\n  whiteList?: { [propName: string]: string[] };\n}\n\nclass MdTextarea extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    allowFilteredHtml: false,\n    id: 'unknown_markdown_id',\n  };\n\n  state = {\n    showEdit: true,\n  };\n\n  toggle(show: boolean = !this.state.showEdit) {\n    this.setState({ showEdit: show });\n  }\n\n  handleToggle = () => this.toggle();\n  activateEdit = () => this.toggle(true);\n  deActivateEdit = () => this.toggle(false);\n\n  render() {\n    const {\n      id,\n      value,\n      toggle,\n      allowFilteredHtml,\n      rows,\n      cols,\n      onChange,\n      onFocus,\n      onBlur,\n      valid,\n      invalid,\n      bsSize,\n      name,\n      autoFocus,\n      disabled,\n      maxLength,\n      readOnly,\n      required,\n      wrap,\n    } = this.props;\n    const { showEdit } = this.state;\n\n    return (\n      <React.Fragment>\n        <Nav tabs={true} key=\"Nav\">\n          <NavItem>\n            <NavLink\n              active={showEdit}\n              onClick={toggle ? this.handleToggle : this.activateEdit}\n            >\n              Edit\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              active={!showEdit}\n              onClick={toggle ? this.handleToggle : this.deActivateEdit}\n            >\n              Preview\n            </NavLink>\n          </NavItem>\n        </Nav>\n        <TabContent\n          key=\"Content\"\n          id={`tabpane_${id}`}\n          activeTab={showEdit ? 'Edit' : 'Preview'}\n        >\n          <TabPane tabId=\"Edit\">\n            <InputTab\n              allowFilteredHtml={allowFilteredHtml}\n              value={value}\n              rows={rows}\n              cols={cols}\n              {...{ onChange, onFocus, onBlur }}\n              {...{ valid, name, invalid, bsSize }}\n              {...{ autoFocus, disabled, maxLength, readOnly, required, wrap }}\n            />\n          </TabPane>\n          <TabPane tabId=\"Preview\">\n            <PreviewTab\n              allowFilteredHtml={allowFilteredHtml}\n              value={value}\n              skipRender={!showEdit}\n            />\n          </TabPane>\n        </TabContent>\n      </React.Fragment>\n    );\n  }\n\n  getFilteredValue() {\n    const { value, whiteList } = this.props;\n    return FormattedText.filterXss({ value, whiteList });\n  }\n}\n\nexport default MdTextarea;\n"],"names":["React.createElement","tslib_1.__extends","InputWrapper","Input","React.PureComponent","getDefaultWhiteList","xss","React.Component","React.Fragment","Nav","NavItem","NavLink","TabContent","TabPane","InputTab","PreviewTab"],"mappings":"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"}